# Prettier Ignore Configuration Examples

> **Note**: See `SKILL.md` for skill instructions. This file contains the template and detailed examples.

## Basic Template

```
dist/
node_modules/
build/
coverage/
*.min.js
*.bundle.js
```

## What Each Pattern Does

### 1. Build Output Directories

#### `dist/`
- **Purpose**: Excludes the distribution/production build directory
- **Why**: Build output is generated code, not source
- **Impact**: Prettier won't format compiled/bundled files
- **Example files**: `dist/index.js`, `dist/assets/main.css`

#### `build/`
- **Purpose**: Excludes alternative build output directory
- **Why**: Some projects use `build/` instead of `dist/`
- **Impact**: Prevents formatting of generated files
- **Example files**: `build/bundle.js`, `build/static/`

### 2. Dependencies

#### `node_modules/`
- **Purpose**: Excludes all npm packages
- **Why**: Third-party code shouldn't be reformatted
- **Impact**: Massive performance improvement (node_modules can be huge)
- **Note**: Prettier automatically ignores this, but explicit is better

### 3. Test Coverage

#### `coverage/`
- **Purpose**: Excludes code coverage reports
- **Why**: Coverage reports are generated by testing tools (Jest, Istanbul, NYC)
- **Impact**: Prevents formatting HTML/JSON coverage files
- **Example files**: `coverage/lcov-report/index.html`, `coverage/coverage-final.json`

### 4. Minified Files

#### `*.min.js`
- **Purpose**: Excludes minified JavaScript files
- **Why**: Minified files are intentionally compressed
- **Impact**: Prettier won't expand minified code
- **Example files**: `jquery.min.js`, `lodash.min.js`, `vendor.min.js`

#### `*.bundle.js`
- **Purpose**: Excludes bundled JavaScript files
- **Why**: Bundles are generated by webpack/rollup/vite
- **Impact**: Skips large concatenated files
- **Example files**: `app.bundle.js`, `vendor.bundle.js`, `chunk.bundle.js`

## How .prettierignore Works

### Pattern Matching
- Uses glob patterns like `.gitignore`
- Matches files relative to project root
- Supports wildcards (`*`, `**`, `?`)
- Trailing slash (`/`) matches only directories

### Precedence
1. `.prettierignore` in project root
2. `--ignore-path` CLI flag
3. Prettier's built-in ignore patterns

## Common Patterns

### Ignore All Build Outputs
```
dist/
build/
out/
.next/
.nuxt/
.output/
```

### Ignore Dependencies
```
node_modules/
vendor/
bower_components/
jspm_packages/
```

### Ignore Generated Files
```
*.generated.js
*.generated.ts
*-generated.vue
__generated__/
```

### Ignore Test Artifacts
```
coverage/
.nyc_output/
test-results/
snapshots/
```

### Ignore Minified/Bundled Files
```
*.min.js
*.min.css
*.bundle.js
*.bundle.css
*.chunk.js
```

### Ignore Documentation
```
docs/build/
dist-docs/
.vuepress/dist/
```

### Ignore Lock Files
```
package-lock.json
yarn.lock
pnpm-lock.yaml
```

### Ignore Environment Files
```
.env
.env.*
!.env.example
```

## Advanced Patterns

### Negate Patterns (Don't Ignore)
```
dist/
!dist/assets/custom.js
```
The `!` prefix means "don't ignore this file"

### Recursive Patterns
```
**/*.min.js
**/__generated__/
**/dist/
```
`**` matches any directory depth

### Specific File Types in Directories
```
public/**/*.min.js
src/**/*.generated.ts
```

### Multiple Extensions
```
*.{min.js,min.css}
*.{bundle.js,bundle.css,chunk.js}
```

## Complete .prettierignore Example

```
# Build outputs
dist/
build/
out/
.next/
.nuxt/
.vitepress/dist/

# Dependencies
node_modules/
vendor/
bower_components/

# Testing
coverage/
.nyc_output/
test-results/
__snapshots__/

# Minified/bundled files
*.min.js
*.min.css
*.bundle.js
*.bundle.css
*.chunk.js

# Generated files
*.generated.js
*.generated.ts
__generated__/

# Logs
*.log
npm-debug.log*
yarn-debug.log*

# Lock files
package-lock.json
yarn.lock
pnpm-lock.yaml

# Environment files
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db

# Documentation builds
docs/.vuepress/dist/
docs/dist/

# Public assets (often minified third-party)
public/vendor/
public/libs/
```

## Integration with Prettier CLI

### Format All Files (Respecting Ignore)
```bash
npx prettier --write .
```

### Check Formatting
```bash
npx prettier --check .
```

### Ignore Additional Files via CLI
```bash
npx prettier --write . --ignore-path .prettierignore.custom
```

### Show What Would Be Formatted
```bash
npx prettier --list-different .
```

## Integration with package.json Scripts

```json
{
  "scripts": {
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "format:staged": "prettier --write"
  }
}
```

## Integration with lint-staged

`.lintstagedrc.json`:
```json
{
  "*.{js,ts,vue,json,md}": ["prettier --write"]
}
```

Prettier will automatically use `.prettierignore` when run through lint-staged.

## Verifying .prettierignore

### Check if File is Ignored
```bash
npx prettier --check path/to/file.js
```

If ignored, output will be empty.

### Debug Ignore Patterns
```bash
npx prettier --debug-check path/to/file.js
```

### List Files Prettier Would Format
```bash
npx prettier --list-different .
```

## Relationship with .gitignore

### Similarities
- Both use glob patterns
- Both support negation with `!`
- Both use trailing `/` for directories

### Differences
- `.gitignore` is for version control
- `.prettierignore` is for code formatting
- They can have different contents

### Should They Match?
Often yes, but not always:
- **Include in both**: `node_modules/`, `dist/`, `coverage/`
- **Only .gitignore**: `.env.local`, `*.log`
- **Only .prettierignore**: `*.min.js`, `package-lock.json`

## Best Practices

### 1. Start Minimal
```
dist/
node_modules/
coverage/
```
Add patterns as needed.

### 2. Document Patterns
```
# Build outputs - generated by Vite
dist/

# Third-party libraries - do not format
public/vendor/
```

### 3. Test Ignore Patterns
```bash
# Verify files are ignored
npx prettier --check dist/
# Should output nothing if properly ignored
```

### 4. Keep in Sync with .gitignore
Review both files together when adding new build outputs or generated files.

### 5. Use Specific Patterns
```
# Good - specific
dist/
*.min.js

# Bad - too broad
*.js
```

### 6. Comment Temporary Ignores
```
# TODO: Remove after fixing formatting issues
legacy/
```

## Troubleshooting

### File Still Being Formatted
1. Check pattern syntax:
   ```bash
   npx prettier --debug-check path/to/file
   ```
2. Verify `.prettierignore` is in project root
3. Check for negation patterns (`!`) overriding
4. Ensure pattern matches file path exactly

### Prettier Ignoring Too Much
1. Review patterns for overly broad wildcards
2. Use more specific patterns
3. Check for trailing slashes on file patterns
4. Use negation to un-ignore specific files

### Performance Issues
1. Ensure `node_modules/` is ignored
2. Add large generated directories
3. Ignore large binary/minified files
4. Use `.prettierignore` instead of CLI flags

### Pattern Not Working
```
# Wrong - missing trailing slash for directory
dist

# Right - directory pattern
dist/

# Wrong - leading slash (too specific)
/src/generated/

# Right - matches anywhere
src/generated/
**/generated/
```

## Editor Integration

### VS Code
`.vscode/settings.json`:
```json
{
  "prettier.ignorePath": ".prettierignore",
  "prettier.useEditorConfig": false
}
```

### WebStorm/IntelliJ
Settings → Languages & Frameworks → JavaScript → Prettier
- Check "Use .prettierignore"

### Vim/Neovim
Most Prettier plugins automatically respect `.prettierignore`.

## CI/CD Integration

### GitHub Actions
```yaml
name: Format Check
on: [push, pull_request]
jobs:
  format:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run format:check
```

### Pre-commit Hook
`.husky/pre-commit`:
```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx prettier --check .
```

## Common Mistakes

### 1. Ignoring Source Files
```
# Bad - ignores source code
src/
```
Only ignore generated/build files, not source.

### 2. Forgetting Trailing Slash
```
# Bad - treats as file pattern
dist

# Good - directory pattern
dist/
```

### 3. Too Many Wildcards
```
# Bad - ignores everything
**/*.js

# Good - specific minified files
**/*.min.js
```

### 4. Duplicating Patterns
```
# Bad - redundant
node_modules/
**/node_modules/

# Good - one is enough
node_modules/
```

## Migration from Other Formatters

### From ESLint (using .eslintignore)
Many patterns can be copied directly:
```bash
cp .eslintignore .prettierignore
```

Then customize for Prettier-specific needs.

### From StandardJS
StandardJS ignores similar paths by default. Create `.prettierignore` based on your build setup.

## Related Files

### .prettierrc
Configuration for formatting rules:
```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2
}
```

### .editorconfig
Basic editor settings (Prettier respects these):
```
[*]
indent_style = space
indent_size = 2
end_of_line = lf
```

## Documentation for Team

Add to README.md:

```markdown
## Code Formatting

This project uses Prettier for code formatting.

### Format All Files
```bash
npm run format
```

### Check Formatting
```bash
npm run format:check
```

### Ignored Files
See `.prettierignore` for excluded files/directories.
```

## Useful Commands

```bash
# Format everything
npx prettier --write .

# Check what needs formatting
npx prettier --list-different .

# Format specific files
npx prettier --write "src/**/*.{js,ts,vue}"

# Format with custom ignore file
npx prettier --write . --ignore-path .prettierignore.custom

# Debug why file is ignored
npx prettier --debug-check dist/bundle.js
```
